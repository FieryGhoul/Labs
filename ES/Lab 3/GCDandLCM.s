	AREA	RESET, DATA, READONLY
	EXPORT __Vectors
__Vectors
	DCD 0x10001000
	DCD Reset_Handler
	ALIGN
	AREA	mycode, CODE, READONLY
	ENTRY
	EXPORT Reset_Handler
Reset_Handler
	MOV R0, #0
	LDR R1, =NUM
	LDR R2, [R1]
	LDR R3, [R1, #4]
	BL GCD
	LDR R4, =GCD_RESULT
	STR R0, [R4]
	LDR R5, =LCM_RESULT
	MUL R6, R2, R3
	BL DIVIDE
	STR R0, [R5]
	B STOP
GCD
	CMP R2, R3
	BGE GCD_CONTINUE
	MOV R2, R3
GCD_CONTINUE
	SUB R2, R2, R3
	CMP R2, #0
	BEQ GCD_DONE
	B GCD
GCD_DONE
	MOV R0, R3
	B STOP
DIVIDE
	MOV R7, #0
	CMP R3, #0
	BEQ DIVIDE_DONE
DIV_LOOP
	CMP R6, R3
	BLT DIVIDE_DONE
	SUB R6, R6, R3
	ADD R7, R7, #1
	B DIV_LOOP
DIVIDE_DONE
	MOV R0, R7
	B STOP
STOP
	B STOP
NUM     DCD 12, 18
GCD_RESULT DCD 0
LCM_RESULT DCD 0
END
